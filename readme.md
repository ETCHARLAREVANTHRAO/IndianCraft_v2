# PhD Evaluation Methodology: Human vs. LLM Travel Plans

This repository details a scientifically rigorous methodology for evaluating and comparing travel itineraries generated by Large Language Models (LLMs) against human-generated "gold standard" itineraries.

---

## Table of Contents

- [1. Core Evaluation Idea](#1-core-evaluation-idea)
- [2. Metrics Used for Evaluation](#2-metrics-used-for-evaluation)
    - [2.1 Buffer Adequacy Score (BAS)](#21-buffer-adequacy-score-bas)
    - [2.2 Crowd-Aware Timing Score (CATS)](#22-crowd-aware-timing-score-cats)
    - [2.3 Transport Delay Absorption Score (TDAS)](#23-transport-delay-absorption-score-tdas)
    - [2.4 Schedule Robustness Score (SRS)](#24-schedule-robustness-score-srs)
- [3. Evaluation Strategies](#3-evaluation-strategies)
- [4. Best Practices for PhD-Level Research](#4-best-practices-for-phd-level-research)
- [5. Dataset-Level Scientific Requirements](#5-dataset-level-scientific-requirements)
- [6. Final Conclusion](#6-final-conclusion)

---

## 1. Core Evaluation Idea

The evaluation follows a robust scientific approach:

1.  **Human Itinerary**: Treated as the **Gold Standard Reference**.
2.  **LLM Itinerary**: Treated as the **System Prediction**.
3.  **Analysis**: Compute robustness and uncertainty-aware metrics for both.
4.  **Comparison**: Measure the difference ($\Delta$) to determine the LLM's proximity to human-level planning quality.

$$ \Delta_{metric} = \text{Metric}(\text{LLM}) - \text{Metric}(\text{Human}) $$

> [!NOTE]
> Uncertainty in travel planning stems from crowd congestion, traffic, and transport delays. High-quality plans must proactively absorb this uncertainty using buffers derived from historical data.

---

## 2. Metrics Used for Evaluation

# Buffer Adequacy Score (BAS)

## Overview
**Buffer Adequacy Score (BAS)** is a quantitative evaluation metric designed to measure the **temporal realism and feasibility** of travel itineraries generated by humans or Large Language Models (LLMs).

BAS evaluates whether the **buffer time between consecutive visits** in an itinerary is:

- Sufficient  
- Category-appropriate  
- Close to expected human planning behavior  

This enables **systematic comparison** between **human-annotated** and **LLM-generated** travel plans.

---

## Inputs

For each place in an itinerary:

- Place name  
- Arrival time $t_a$  
- Base visit duration $v$  
- Travel time to next place $T_{travel}$  
- Category of place $c$  
- **Congestion tier factor** $C_f$ derived from best-time analysis  

Typical congestion factors:

| Tier | Meaning | $C_f$ |
|------|---------|-------|
| L | Low | 1.0 |
| A | Average | 1.2 |
| BA | Below Average | 1.5 |
| AA | Above Average | 1.8 |
| H | High | 2.5+ |

---

## Step 1: Congestion-Adjusted Buffer Time

First compute the **congestion-adjusted visit duration**:

$$
v_{adj} = v \times C_f
$$

Then compute the **effective departure time**:

$$
t_d = t_a + v_{adj}
$$

The **actual buffer time** between consecutive visits is:

$$
B_{actual} = (t_{next\_arrival} - t_d) - T_{travel}
$$

This represents **free time available beyond required travel after accounting for crowd-induced delay**.

---

## Step 2: Expected Buffer Range (Category-Aware)

Each place category $c$ has an **expected human-derived buffer interval**:

$$
B_{expected}^{(c)} \in [a_c, b_c]
$$

Where:

- $a_c$ = minimum reasonable buffer  
- $b_c$ = maximum typical buffer  

These ranges must be obtained from:

- Human annotations  
- Empirical travel datasets  
- Statistical estimation (mean ± deviation or percentile range)  

---

## Step 3: BAS Component Scores

### 3.1 Soft Adequacy Score

Binary check of whether buffer lies inside expected range:

$$
Soft =
\begin{cases}
1, & B_{actual} \in [a_c, b_c] \\
0, & \text{otherwise}
\end{cases}
$$

**Purpose:**  
Captures **basic feasibility**.

---

### 3.2 Quantitative Deviation Score

Distance of actual buffer from expected range:

$$
D =
\begin{cases}
0, & B_{actual} \in [a_c, b_c] \\
\min(|B_{actual} - a_c|,\ |B_{actual} - b_c|), & \text{otherwise}
\end{cases}
$$

Normalized deviation:

$$
Q = \frac{D}{b_c - a_c}
$$

**Purpose:**  
Measures **how far the buffer deviates from realistic planning**.

---

## Step 4: Final BAS Metric

For an itinerary with $N$ transitions:

$$
BAS = 1 - \frac{1}{N} \sum_{i=1}^{N} Q_i
$$

---

## Interpretation

- **BAS ≈ 1** → Highly realistic temporal planning  
- **BAS ≈ 0** → Poor or unrealistic timing  
- Enables **human vs LLM comparison**


### 2.2 Crowd-Aware Timing Score (CATS)

Evaluates how well an itinerary **avoids crowded or peak-risk time windows** using
place-specific crowd intensity information.

---

#### Inputs (per POI)

- Place name  
- Arrival time $t_a$  
- Visit duration $v$  
- Departure time $t_d = t_a + v$  
- Crowd-intensity timeline from best-time analysis  

---

#### Crowd Intensity Mapping ($R$)

Each congestion tier is mapped to a **risk value**:

- Below Average $\rightarrow 0$  
- Average $\rightarrow 0.3$  
- Above Average $\rightarrow 0.6$  
- High $\rightarrow 1.0$  

Let:

$$
R(t) \in [0,1]
$$

denote the **crowd risk during the visit interval**.

---

#### Visit-Level Score

For a POI visit occurring over interval $[t_a, t_d]$:

$$
CATS_{poi} = 1 - R([t_a, t_d])
$$

where $R([t_a, t_d])$ is the **maximum crowd risk encountered during the visit**.

---

#### Peak Overlap Penalty

If the visit **overlaps with defined peak hours**:

$$
CATS_{poi} \leftarrow 0.5 \times CATS_{poi}
$$

This penalizes schedules that **enter high-congestion periods**.

---

#### Aggregate Score

For an itinerary with $N$ POI visits:

$$
CATS = \frac{1}{N} \sum_{i=1}^{N} CATS_{poi}^{(i)}
$$

---

#### Interpretation

- **CATS → 1** : Visits scheduled in low-crowd periods  
- **CATS → 0** : Heavy overlap with peak congestion  
- Enables **human vs LLM comparison of crowd-aware planning**


### 2.3 Transport Delay Absorption Score (TDAS)

Measures whether **transportation delays can be absorbed by the available temporal buffer**
without disrupting the overall itinerary.

---

#### Inputs (per transport segment $j$)

- Transportation mode $m_j \in \{\text{flight, train, bus, cab}\}$  
- Scheduled departure time $t_{\text{dep}}^{(j)}$  
- Scheduled arrival time $t_{\text{arr}}^{(j)}$  
- Available buffer after arrival $B_j$  
- Historical/statistical delay information for the given mode  

---

#### Step 1: Delay Modeling by Transport Mode

Let $D_j$ denote the **random delay duration**.

---

##### **Train — Weighted Historical Delay Mean**

Delay expectation is computed using **multi-horizon historical averages**:

$$
\mu_{\text{train}} =
\sum_{h \in \{1w,1m,3m,6m,1y\}} w_h \; d_h
$$

Where:

- $d_h$ = average delay over horizon $h$  
- $w_h$ = normalized weight such that $\sum w_h = 1$  

**Delay absorption indicator:**

$$
TDAS_j = I(B_j \ge \mu_{\text{train}})
$$

where $I(\cdot)$ is the **indicator function**.

---

##### **Flight — On-Time Probability + Delay Distribution**

Let:

- $p_{\text{on-time}}$ = probability of zero delay  
- $\mu_{\text{late}}, \sigma_{\text{late}}$ = mean and std. deviation of delay when late  
- $\Phi(\cdot)$ = standard normal CDF  

Then:

$$
TDAS_j =
p_{\text{on-time}}
+
(1 - p_{\text{on-time}})
\;
\Phi\!\left(\frac{B_j - \mu_{\text{late}}}{\sigma_{\text{late}}}\right)
$$

---

##### **Bus and Cab — Empirical Road Delay Distribution**

Assuming empirical delay mean $\mu_{\text{road}}$ and std. deviation $\sigma_{\text{road}}$:

$$
TDAS_j =
\Phi\!\left(\frac{B_j - \mu_{\text{road}}}{\sigma_{\text{road}}}\right)
$$

---

#### Step 2: Category-Aware Safe Buffer Range

Each transport mode has an **expected safe buffer interval**:

$$
B_j \in [a_{m_j}, b_{m_j}]
$$

**Soft adequacy score:**

$$
Soft_j =
\begin{cases}
1, & B_j \in [a_{m_j}, b_{m_j}] \\
0, & \text{otherwise}
\end{cases}
$$

---

#### Step 3: Quantitative Buffer Deviation

$$
D^{buf}_j =
\begin{cases}
0, & B_j \in [a_{m_j}, b_{m_j}] \\
\min(|B_j - a_{m_j}|,\ |B_j - b_{m_j}|), & \text{otherwise}
\end{cases}
$$

$$
Q_j = \frac{D^{buf}_j}{b_{m_j} - a_{m_j}}
$$

---

#### Step 4: Final Segment Score

Combine **delay absorption probability** with **buffer realism penalty**:

$$
TDAS_j^{*} = TDAS_j \times (1 - Q_j)
$$

---

#### Aggregate Score

For an itinerary with $M$ transport segments:

$$
TDAS = \frac{1}{M} \sum_{j=1}^{M} TDAS_j^{*}
$$

---

#### Interpretation

- **TDAS → 1** : Delays are highly absorbable; itinerary remains stable  
- **TDAS → 0** : High disruption risk due to insufficient buffer  
- Enables **robust comparison of human vs LLM transport planning**


### 2.4 Schedule Robustness Score (SRS)
Evaluates the global resilience of the entire itinerary to cumulative uncertainty.

**Daily Score:**
$$ SRS_{\text{day}} = \frac{1}{K} \sum I(T_k \geq E[D_k]) $$

**Where:**
- $T_k$: Slack between consecutive activities
- $E[D_k]$: Combined expected uncertainty

**Trip-Level Score:**
$$ SRS = \frac{1}{D} \sum_{d=1}^{D} SRS_{\text{day}} $$

---

## 3. Evaluation Strategies

### Option A: Robustness Metric Comparison (High Scientific Value)
Compare BAS, CATS, TDAS, and SRS between Human and LLM plans.
- **Measures**: Real-world feasibility, uncertainty handling, decision quality.
- **Suitability**: Recommended as the primary evaluation for PhD-level research.

### Option B: Time Deviation Analysis (Lower Scientific Value)
Measure similarity to the human schedule (time differences, order mismatch, missing POIs).
- **Measures**: Stylistic similarity rather than true planning quality.
- **Limitation**: Multiple valid itineraries may exist, making similarity a weak proxy for quality.

---

## 4. Best Practices for PhD-Level Research

Top-tier research should combine both approaches hierarchically:

1.  **Primary Evaluation**: Statistical comparison of **BAS, CATS, TDAS, and SRS** between Human and LLM plans.
2.  **Secondary Analysis**: Time deviation analysis and qualitative error analysis to provide supporting evidence.

---

## 5. Dataset-Level Scientific Requirements

To be publishable, the analysis must include:
- Mean and Standard Deviation for all metrics.
- Confidence Intervals.
- **Statistical Significance Testing** (e.g., paired t-test or bootstrap).
- Qualitative analysis of failure cases.

---

## 6. Final Conclusion

The optimal evaluation methodology treats **human plans as the gold standard** and uses **BAS, CATS, TDAS, and SRS** to measure local buffer sufficiency, crowd-risk awareness, transport feasibility, and global robustness. This provides a complete, uncertainty-aware assessment of LLM travel planning capabilities.
